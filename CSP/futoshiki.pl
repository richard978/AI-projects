:- use_module(library(clpfd)).

valid([]).
valid([Head|Tail]):-
     all_different(Head),
    valid(Tail).

%Enter futo1 to futo5 to show the 5 answers.
futo1([[S11, S12, S13, S14],
      [S21, S22, S23, S24],
      [S31, S32, S33, S34],
      [S41, S42, S43, S44]]) :-

    Row1 = [S11, S12, S13, S14],
    Row2 = [S21, S22, S23, S24],
    Row3 = [S31, S32, S33, S34],
    Row4 = [S41, S42, S43, S44],
	Row1 ins 1..4,
	Row2 ins 1..4,
	Row3 ins 1..4,
	Row4 ins 1..4,
    Col1 = [S11, S21, S31, S41],
    Col2 = [S12, S22, S32, S42],
    Col3 = [S13, S23, S33, S43],
    Col4 = [S14, S24, S34, S44],

    S12 #< S22,
    S14 #< S13,
    S23 #< S33,
    S42 #< S41,
    S43 #< S42,
    S13 #= 3,

    valid([Row1, Row2, Row3, Row4,
           Col1, Col2, Col3, Col4]),

    labeling([],[
      S11, S12, S13, S14,
      S21, S22, S23, S24,
      S31, S32, S33, S34,
      S41, S42, S43, S44]),
    write([
     [S11, S12, S13, S14],
     [S21, S22, S23, S24],
     [S31, S32, S33, S34],
     [S41, S42, S43, S44]]).

futo2([[S11, S12, S13, S14, S15],
      [S21, S22, S23, S24, S25],
      [S31, S32, S33, S34, S35],
      [S41, S42, S43, S44, S45],
	  [S51, S52, S53, S54, S55]]) :-

    Row1 = [S11, S12, S13, S14, S15],
    Row2 = [S21, S22, S23, S24, S25],
    Row3 = [S31, S32, S33, S34, S35],
    Row4 = [S41, S42, S43, S44, S45],
	Row5 = [S51, S52, S53, S54, S55],
	Row1 ins 1..5,
	Row2 ins 1..5,
	Row3 ins 1..5,
	Row4 ins 1..5,
	Row5 ins 1..5,
    Col1 = [S11, S21, S31, S41, S51],
    Col2 = [S12, S22, S32, S42, S52],
    Col3 = [S13, S23, S33, S43, S53],
    Col4 = [S14, S24, S34, S44, S54],
	Col5 = [S15, S25, S35, S45, S55],

    S12 #< S11,
    S11 #< S21,
    S22 #< S23,
	S23 #< S24,
	S24 #< S25,
    S32 #< S33,
    S52 #< S51,
    S55 #= 4,

    valid([Row1, Row2, Row3, Row4, Row5,
           Col1, Col2, Col3, Col4, Col5]),

    labeling([],[
      S11, S12, S13, S14, S15,
      S21, S22, S23, S24, S25,
      S31, S32, S33, S34, S35,
      S41, S42, S43, S44, S45,
	  S51, S52, S53, S54, S55]),
    write([
     [S11, S12, S13, S14, S15],
     [S21, S22, S23, S24, S25],
     [S31, S32, S33, S34, S35],
     [S41, S42, S43, S44, S45],
	 [S51, S52, S53, S54, S55]]).

futo3([[S11, S12, S13, S14,S15,S16],
      [S21, S22, S23, S24,S25,S26],
      [S31, S32, S33, S34,S35,S36],
      [S41, S42, S43, S44,S45,S46],
	  [S51,S52,S53,S54,S55,S56],
	  [S61,S62,S63,S64,S65,S66]]) :-

    Row1 = [S11, S12, S13, S14,S15,S16],
    Row2 = [S21, S22, S23, S24,S25,S26],
    Row3 = [S31, S32, S33, S34,S35,S36],
    Row4 = [S41, S42, S43, S44,S45,S46],
	Row5 = [S51,S52,S53,S54,S55,S56],
	Row6 = [S61,S62,S63,S64,S65,S66],

    Col1 = [S11, S21, S31, S41,S51,S61],
    Col2 = [S12, S22, S32, S42,S52,S62],
    Col3 = [S13, S23, S33, S43,S53,S63],
    Col4 = [S14, S24, S34, S44,S54,S64],
	Col5 = [S15,S25,S35,S45,S55,S65],
	Col6 = [S16,S26,S36,S46,S56,S66], 
	Row1 ins 1..6,
	Row2 ins 1..6,
	Row3 ins 1..6,
	Row4 ins 1..6,
	Row5 ins 1..6,
	Row6 ins 1..6,

    S12 #< S11,
    S32 #< S22,
    S25 #< S24,
    S31 #< S32,
    S26 #< S36,
    S44 #< S43,
	S45 #< S44,
	S64 #< S65,
	S65 #< S66,
	S15 #= 2,
	S16 #= 6,
	S26 #= 3,
	S31 #= 3,
	S43 #= 4,

    valid([Row1, Row2, Row3, Row4,Row5,Row6,
           Col1, Col2, Col3, Col4,Col5,Col6]),

    labeling([],[
      S11, S12, S13, S14,S15,S16,
      S21, S22, S23, S24,S25,S26,
      S31, S32, S33, S34,S35,S36,
      S41, S42, S43, S44,S45,S46,
	  S51,S52,S53,S54,S55,S56,
	  S61,S62,S63,S64,S65,S66]),
    write([
     [S11, S12, S13, S14,S15,S16],
     [S21, S22, S23, S24,S25,S26],
     [S31, S32, S33, S34,S35,S36],
     [S41, S42, S43, S44,S45,S46],
	 [S51,S52,S53,S54,S55,S56],
	 [S61,S62,S63,S64,S65,S66]]).
	 
	 
	 
futo4([[S11, S12, S13, S14,S15,S16,S17],
      [S21, S22, S23, S24,S25,S26,S27],
      [S31, S32, S33, S34,S35,S36,S37],
      [S41, S42, S43, S44,S45,S46,S47],
	  [S51,S52,S53,S54,S55,S56,S57],
	  [S61,S62,S63,S64,S65,S66,S67],
	  [S71,S72,S73,S74,S75,S76,S77]]) :-
    Row1 = [S11, S12, S13, S14,S15,S16,S17],
    Row2 = [S21, S22, S23, S24,S25,S26,S27],
    Row3 = [S31, S32, S33, S34,S35,S36,S37],
    Row4 = [S41, S42, S43, S44,S45,S46,S47],
	Row5 = [S51,S52,S53,S54,S55,S56,S57],
	Row6 = [S61,S62,S63,S64,S65,S66,S67],
	Row7 = [S71,S72,S73,S74,S75,S76,S77],
	Row1 ins 1..7,
	Row2 ins 1..7,
	Row3 ins 1..7,
	Row4 ins 1..7,
	Row5 ins 1..7,
	Row6 ins 1..7,
	Row7 ins 1..7,
	

    Col1 = [S11, S21, S31, S41,S51,S61,S71],
    Col2 = [S12, S22, S32, S42,S52,S62,S72],
    Col3 = [S13, S23, S33, S43,S53,S63,S73],
    Col4 = [S14, S24, S34, S44,S54,S64,S74],
	Col5 = [S15,S25,S35,S45,S55,S65,S75],
	Col6 = [S16,S26,S36,S46,S56,S66,S76],
	Col7 = [S17,S27,S37,S47,S57,S67,S77], 

    S11 #< S12,
    S13 #< S12,
    S17 #< S16,
    S26 #< S25,
    S33 #< S23,
    S31 #< S32,
	S32 #< S33,
	S37 #< S36,
	S42 #< S43,
	S35 #< S45,
	S46 #< S45,
	S52 #< S42,
	S53 #< S52,
	S44 #< S54,
	S61 #< S62,
	S63 #< S53,
	S65 #< S75,
	S76 #< S66,
	S77 #< S76,
	
	S17 #= 6,
	S47 #= 2,
	S62 #= 5,
	

    valid([Row1, Row2, Row3, Row4,Row5,Row6,Row7,
           Col1, Col2, Col3, Col4,Col5,Col6,Col7]),

    labeling([],[
      S11, S12, S13, S14,S15,S16,S17,
      S21, S22, S23, S24,S25,S26,S27,
      S31, S32, S33, S34,S35,S36,S37,
      S41, S42, S43, S44,S45,S46,S47,
	  S51,S52,S53,S54,S55,S56,S57,
	  S61,S62,S63,S64,S65,S66,S67,
	  S17,S27,S37,S47,S57,S67,S77]),
    write([
     [S11, S12, S13, S14,S15,S16,S17],
     [S21, S22, S23, S24,S25,S26,S27],
     [S31, S32, S33, S34,S35,S36,S37],
     [S41, S42, S43, S44,S45,S46,S47],
	 [S51,S52,S53,S54,S55,S56,S57],
	 [S61,S62,S63,S64,S65,S66,S67],
	 [S71,S72,S73,S74,S75,S76,S77]]).
	 
futo5([[S11, S12, S13, S14, S15, S16, S17, S18],
      [S21, S22, S23, S24, S25, S26, S27, S28],
      [S31, S32, S33, S34, S35, S36, S37 ,S38],
      [S41, S42, S43, S44, S45, S46, S47, S48],
	  [S51, S52, S53, S54, S55, S56, S57, S58],
	  [S61, S62, S63, S64, S65, S66, S67, S68],
	  [S71, S72, S73, S74, S75, S76, S77, S78],
	  [S81, S82, S83, S84, S85, S86, S87, S88]]) :-

    Row1 = [S11, S12, S13, S14, S15, S16, S17, S18],
    Row2 = [S21, S22, S23, S24, S25, S26, S27, S28],
    Row3 = [S31, S32, S33, S34, S35, S36, S37 ,S38],
    Row4 = [S41, S42, S43, S44, S45, S46, S47, S48],
	Row5 = [S51, S52, S53, S54, S55, S56, S57, S58],
	Row6 = [S61, S62, S63, S64, S65, S66, S67, S68],
	Row7 = [S71, S72, S73, S74, S75, S76, S77, S78],
	Row8 = [S81, S82, S83, S84, S85, S86, S87, S88],
	Row1 ins 1..8,
	Row2 ins 1..8,
	Row3 ins 1..8,
	Row4 ins 1..8,
	Row5 ins 1..8,
	Row6 ins 1..8,
	Row7 ins 1..8,
	Row8 ins 1..8,
    Col1 = [S11, S21, S31, S41, S51, S61, S71, S81],
    Col2 = [S12, S22, S32, S42, S52, S62, S72, S82],
    Col3 = [S13, S23, S33, S43, S53, S63, S73, S83],
    Col4 = [S14, S24, S34, S44, S54, S64, S74, S84],
	Col5 = [S15, S25, S35, S45, S55, S65, S75, S85],
	Col6 = [S16, S26, S36, S46, S56, S66, S76, S86],
	Col7 = [S17, S27, S37, S47, S57, S67, S77, S87],
	Col8 = [S18, S28, S38, S48, S58, S68, S78, S88],

    S12 #> S13,
	S13 #> S14,
    S15 #< S16,
	S16 #< S17,
	S17 #< S18,
	S21 #< S22,
	S26 #< S27,
	S33 #> S23,
	S34 #> S24,
	S33 #< S34,
	S36 #< S26,
	S37 #< S27,
	S41 #> S42,
	S42 #> S43,
	S44 #< S34,
	S51 #> S52,
	S54 #< S44,
	S57 #< S58,
	S58 #< S48,
	S65 #< S66,
	S66 #> S67,
	S66 #> S56,
	S68 #> S58,
	S73 #> S74,
	S75 #< S65,
	S25 #= 6,
	S27 #= 7,
	S34 #= 4,
	S58 #= 6,
	S66 #= 4,
	S78 #= 3,

    valid([Row1, Row2, Row3, Row4, Row5, Row6, Row7, Row8,
           Col1, Col2, Col3, Col4, Col5, Col6, Col7, Col8]),

    labeling([],[
      S11, S12, S13, S14, S15, S16, S17, S18,
      S21, S22, S23, S24, S25, S26, S27, S28,
      S31, S32, S33, S34, S35, S36, S37 ,S38,
      S41, S42, S43, S44, S45, S46, S47, S48,
	  S51, S52, S53, S54, S55, S56, S57, S58,
	  S61, S62, S63, S64, S65, S66, S67, S68,
	  S71, S72, S73, S74, S75, S76, S77, S78,
	  S81, S82, S83, S84, S85, S86, S87, S88]),
	write([
     [S11, S12, S13, S14, S15, S16, S17, S18],
     [S21, S22, S23, S24, S25, S26, S27, S28],
     [S31, S32, S33, S34, S35, S36, S37 ,S38],
     [S41, S42, S43, S44, S45, S46, S47, S48],
	 [S51, S52, S53, S54, S55, S56, S57, S58],
	 [S61, S62, S63, S64, S65, S66, S67, S68],
	 [S71, S72, S73, S74, S75, S76, S77, S78],
	 [S81, S82, S83, S84, S85, S86, S87, S88]]).